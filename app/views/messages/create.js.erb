function refreshForm(innerHTML) {
  const newMessageForm = document.getElementById('new_message');
    newMessageForm.innerHTML = innerHTML;
}

function addMessage(messageHTML) {
  const messages = document.getElementById('messages');
  messages.insertAdjacentHTML('beforeend', messageHTML);
}

function addLoupMessage(messageHTML) {
  const messages = document.getElementById('loup_messages');
    messages.insertAdjacentHTML('beforeend', messageHTML);
}

function createMessage() {
  const messageDiv = document.getElementById("messages");
  const loupMessageDiv = document.getElementById("loup_messages");

  if (messageDiv) {
    <% if @message.errors.any? %>
      refreshForm('<%= j render "messages/form", game: @game, message: @message, player: @player %>');
    <% else %>
      addMessage('<%= j render "messages/show", message: @message, author: true %>');
      refreshForm('<%= j render "messages/form", game: @game, message: Message.new, player: @player %>');
    <% end %>
  } else if (loupMessageDiv) {
    <% if @message.errors.any? %>
      refreshForm('<%= j render "messages/form", game: @game, message: @message, player: @player %>');
    <% else %>
      addLoupMessage('<%= j render "messages/show", message: @message, author: true %>');
      refreshForm('<%= j render "messages/form", game: @game, message: Message.new, player: @player %>');
    <% end %>
  }
}

createMessage();

